using System;
using System.Net;

namespace Energistics.DataAccess.WITSML141.WMLS
{
    /// <summary>
    /// Overrides default functionality generated by the XSD.exe tool.
    /// </summary>
    /// <seealso cref="System.Web.Services.Protocols.SoapHttpClientProtocol" />
    public partial class WMLS : IWitsmlClient
    {
        /// <summary>
        /// Gets or sets a value indicating whether compression is enabled.
        /// </summary>
        /// <value><c>true</c> if compression is enabled; otherwise, <c>false</c>.</value>
        public bool IsCompressionEnabled { get; set; }

        /// <summary>
        /// Creates a <see cref="T:System.Net.WebRequest" /> for the specified <paramref name="uri" />.
        /// </summary>
        /// <param name="uri">The <see cref="T:System.Uri" /> to use when creating the <see cref="T:System.Net.WebRequest" />.</param>
        /// <returns>The <see cref="T:System.Net.WebRequest" />.</returns>
        protected override WebRequest GetWebRequest(Uri uri)
        {
            var request = base.GetWebRequest(uri);
            var httpRequest = request as HttpWebRequest;

            if (httpRequest != null)
            {
                httpRequest.Headers.Add("Accept-Encoding", "gzip");
                httpRequest.AutomaticDecompression = DecompressionMethods.GZip;
            }

            return request;
        }
    }
}
